<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>book a slot</title>
    <%- include('partials/bootstrap') %>
    <link rel="stylesheet" href="/reset.css" type="text/css" />
    <link rel="stylesheet" href="/bookSlot/bookSlot.css" type="text/css" />
    <script src="/slotToggle.js"></script>
    <script src="/dateSlider.js"></script>

    <!-- Compiled and minified CSS -->
  </head>
  <body>
    <!-- navbar included -->
    <%- include('partials/navbar') %>

    <section class="slot_parent">
      <div class="slot_inner">
        <div class="slot_header_content">
          <div class="slot_img">
            <img
              class="card-img-top"
              src="https://s3.ap-south-1.amazonaws.com/appdev.konfinity.com/css/tasks/image--002.jpg"
            />
          </div>
          <div class="doctor_detail__right_section">
            <div class="doc_detail__name">
              <h3>Dr. <%= doc.name%></h3>
            </div>
            <div class="doc_loaction">
              <%= doc.city %>
            </div>
            <div class="doc_specialization">
              <%docs.forEach(el=>{%> <%= el.speciality %> <%})%> specialist
            </div>
            <div class="doc_fees">
              <%docs.forEach(el=>{%>Rs <%= el.fee %> <%})%>
            </div>
          </div>
        </div>
        <hr />
        <div class="slot_date_details__carousel">
          <div class="carousel_wrapper">
            <i class="fas fa-arrow-left prev"></i>
            <div class="carousel_wrapper__inner">
              <div class="dateField active data" onclick="displaySlot()">
                <%=days[0]%>
              </div>
              <div class="dateField data1" onclick="displaySlot()">
                <%=days[1]%>
              </div>
              <div class="dateField data2"><%=days[2]%></div>
              <div class="dateField data3"><%=days[3]%></div>
              <div class="dateField data4"><%=days[4]%></div>
              <div class="dateField data5"><%=days[5]%></div>
              <div class="dateField data6"><%=days[6]%></div>
              <div class="dateField data7"><%=days[7]%></div>
              <div class="dateField data8"><%=days[8]%></div>
              <div class="dateField data9"><%=days[9]%></div>
            </div>
            <i class="fas fa-arrow-right next"></i>
          </div>
        </div>

        <div class="slot_categorization_by_time"></div>
        <!-- <% function chunk (arr, len) {%> <%var m = 0, n = arr.length;%> <%while
        (m < n) { chunks.push(arr.slice(m, m += len));}%> <% return chunks; } %> -->
        <div class="display_slot__details">
          <div class="slot-details" id="slot-details" style="display: none;">
            <div class="morning_slots">
              <h3>Morning Slot</h3>
              <ul>
                <%for(i in slotData){ %> <% if(slotData[i].slotDate === days[0]
                && slotData[i].slot === "morningSlot") {%>
                <p></p>
                <% let d = slotData[i].subSlotTime %> <% if(d < 12) d=d+12 %>
                <%=d%>
                <p></p>
                <% if(parseInt(slotData[i].subSlotTime) >=
                parseInt(moment(Date.now()).format("hh:mm"))){ %>
                <li>
                  <a href="/appointmentDetails/<%=slotData[i].subId%>">
                    <%= slotData[i].subSlotTime%></a
                  >
                </li>
                <p></p>
                <%}}} %>
              </ul>
            </div>
            <hr />
            <div class="afternoon_slots">
              <h3>Afternoon Slot</h3>
              <ul>
                <%for(i in slotData){ %> <% if(slotData[i].slotDate === days[0]
                && slotData[i].slot === "afternoonSlot") {%>
                <p></p>
                <% let d = slotData[i].subSlotTime %> <% if(d < 12){d=d+12} %>
                <%=d%>
                <p></p>
                <li>
                  <a href="/appointmentDetails/<%=slotData[i].subId%>"
                    ><%= slotData[i].subSlotTime%></a
                  >
                </li>
                <p></p>
                <%}} %>
              </ul>
            </div>
            <hr />
            <div class="evening_Slots">
              <h3>Evening Slots</h3>
              <ul>
                <%for(i in slotData){ %> <% if(slotData[i].slotDate === days[0]
                && slotData[i].slot === "eveningSlot") {%>
                <p></p>
                <li>
                  <a href="/appointmentDetails/<%=slotData[i].subId%>"
                    ><%= slotData[i].subSlotTime%></a
                  >
                </li>
                <p></p>
                <%}} %>
              </ul>
            </div>
          </div>
          <div class="slot-details" id="slot-details1" style="display: none;">
            <div class="morning_slots">
              <h3>Morning Slot</h3>
              <ul>
                <%for(i in slotData){ %> <% if(slotData[i].slotDate === days[1]
                && slotData[i].slot === "morningSlot") {%>
                <p></p>
                <% if(parseInt(slotData[i].subSlotTime) >=
                parseInt(moment(Date.now()).format("hh:mm A"))){ %>%>
                <li>
                  <a href="/appointmentDetails/<%=slotData[i].subId%>">
                    <%= slotData[i].subSlotTime%></a
                  >
                </li>
                <%}%>
                <p></p>
                <%}} %>
              </ul>
            </div>
            <hr />
            <div class="afternoon_slots">
              <h3>Afternoon Slot</h3>
              <ul>
                <%for(i in slotData){ %> <% if(slotData[i].slotDate === days[1]
                && slotData[i].slot === "afternoonSlot") {%>
                <p></p>

                <p></p>
                <li>
                  <a href="/appointmentDetails/<%=slotData[i].subId%>"
                    ><%= slotData[i].subSlotTime%></a
                  >
                </li>
                <p></p>
                <%}} %>
              </ul>
            </div>
            <hr />
            <div class="evening_Slots">
              <h3>Evening Slots</h3>
              <ul>
                <%for(i in slotData){ %> <% if(slotData[i].slotDate === days[1]
                && slotData[i].slot === "eveningSlot") {%>
                <p></p>
                <li>
                  <a href="/appointmentDetails/<%=slotData[i].subId%>"
                    ><%= slotData[i].subSlotTime%></a
                  >
                </li>
                <p></p>
                <%}} %>
              </ul>
            </div>
          </div>
          <div class="slot-details" id="slot-details2" style="display: none;">
            <div class="morning_slots">
              <h3>Morning Slot</h3>
              <ul>
                <%for(i in slotData){ %> <% if(slotData[i].slotDate === days[2]
                && slotData[i].slot === "morningSlot") {%>
                <p></p>

                <li>
                  <a href="/appointmentDetails/<%=slotData[i].id%>">
                    <%= slotData[i].subSlotTime%></a
                  >
                </li>
                <p></p>
                <%}} %>
              </ul>
            </div>
            <hr />
            <div class="afternoon_slots">
              <h3>Afternoon Slot</h3>
              <ul>
                <%for(i in slotData){ %> <% if(slotData[i].slotDate === days[2]
                && slotData[i].slot === "afternoonSlot") {%>
                <p></p>

                <p></p>
                <li>
                  <a href="/appointmentDetails/<%=slotData[i].subId%>"
                    ><%= slotData[i].subSlotTime%></a
                  >
                </li>
                <p></p>
                <%}} %>
              </ul>
            </div>
            <hr />
            <div class="evening_Slots">
              <h3>Evening Slots</h3>
              <ul>
                <%for(i in slotData){ %> <% if(slotData[i].slotDate === days[2]
                && slotData[i].slot === "eveningSlot") {%>
                <p></p>
                <li>
                  <a href="/appointmentDetails/<%=slotData[i].subId%>"
                    ><%= slotData[i].subSlotTime%></a
                  >
                </li>
                <p></p>
                <%}} %>
              </ul>
            </div>
          </div>
          <div class="slot-details" id="slot-details3" style="display: none;">
            <div class="morning_slots">
              <h3>Morning Slot</h3>
              <ul>
                <%for(i in slotData){ %> <% if(slotData[i].slotDate === days[3]
                && slotData[i].slot === "morningSlot") {%>
                <p></p>

                <li>
                  <a href="/appointmentDetails/<%=slotData[i].id%>">
                    <%= slotData[i].subSlotTime%></a
                  >
                </li>
                <p></p>
                <%}} %>
              </ul>
            </div>
            <hr />
            <div class="afternoon_slots">
              <h3>Afternoon Slot</h3>
              <ul>
                <%for(i in slotData){ %> <% if(slotData[i].slotDate === days[3]
                && slotData[i].slot === "afternoonSlot") {%>
                <p></p>

                <p></p>
                <li>
                  <a href="/appointmentDetails/<%=slotData[i].subId%>"
                    ><%= slotData[i].subSlotTime%></a
                  >
                </li>
                <p></p>
                <%}} %>
              </ul>
            </div>
            <hr />
            <div class="evening_Slots">
              <h3>Evening Slots</h3>
              <ul>
                <%for(i in slotData){ %> <% if(slotData[i].slotDate === days[3]
                && slotData[i].slot === "eveningSlot") {%>
                <p></p>
                <li>
                  <a href="/appointmentDetails/<%=slotData[i].subId%>"
                    ><%= slotData[i].subSlotTime%></a
                  >
                </li>
                <p></p>
                <%}} %>
              </ul>
            </div>
          </div>
          <div class="slot-details" id="slot-details4" style="display: none;">
            <div class="morning_slots">
              <h3>Morning Slot</h3>
              <ul>
                <%for(i in slotData){ %> <% if(slotData[i].slotDate === days[4]
                && slotData[i].slot === "morningSlot") {%>
                <p></p>

                <li>
                  <a href="/appointmentDetails/<%=slotData[i].id%>">
                    <%= slotData[i].subSlotTime%></a
                  >
                </li>

                <p></p>
                <%}} %>
              </ul>
            </div>
            <hr />
            <div class="afternoon_slots">
              <h3>Afternoon Slot</h3>
              <ul>
                <%for(i in slotData){ %> <% if(slotData[i].slotDate === days[4]
                && slotData[i].slot === "afternoonSlot") {%>
                <p></p>

                <p></p>
                <li>
                  <a href="/appointmentDetails/<%=slotData[i].subId%>"
                    ><%= slotData[i].subSlotTime%></a
                  >
                </li>
                <p></p>
                <%}} %>
              </ul>
            </div>
            <hr />
            <div class="evening_Slots">
              <h3>Evening Slots</h3>
              <ul>
                <%for(i in slotData){ %> <% if(slotData[i].slotDate === days[4]
                && slotData[i].slot === "eveningSlot") {%>
                <p></p>
                <li>
                  <a href="/appointmentDetails/<%=slotData[i].subId%>"
                    ><%= slotData[i].subSlotTime%></a
                  >
                </li>
                <p></p>
                <%}} %>
              </ul>
            </div>
          </div>
          <div class="slot-details" id="slot-details5" style="display: none;">
            <div class="morning_slots">
              <h3>Morning Slot</h3>
              <ul>
                <%for(i in slotData){ %> <% if(slotData[i].slotDate === days[5]
                && slotData[i].slot === "morningSlot") {%>
                <p></p>

                <li>
                  <a href="/appointmentDetails/<%=slotData[i].id%>">
                    <%= slotData[i].subSlotTime%></a
                  >
                </li>
                <p></p>
                <%}} %>
              </ul>
            </div>
            <hr />
            <div class="afternoon_slots">
              <h3>Afternoon Slot</h3>
              <ul>
                <%for(i in slotData){ %> <% if(slotData[i].slotDate === days[5]
                && slotData[i].slot === "afternoonSlot") {%>
                <p></p>

                <p></p>
                <li>
                  <a href="/appointmentDetails/<%=slotData[i].subId%>"
                    ><%= slotData[i].subSlotTime%></a
                  >
                </li>
                <p></p>
                <%}} %>
              </ul>
            </div>
            <hr />
            <div class="evening_Slots">
              <h3>Evening Slots</h3>
              <ul>
                <%for(i in slotData){ %> <% if(slotData[i].slotDate === days[5]
                && slotData[i].slot === "eveningSlot") {%>
                <p></p>
                <li>
                  <a href="/appointmentDetails/<%=slotData[i].subId%>"
                    ><%= slotData[i].subSlotTime%></a
                  >
                </li>
                <p></p>
                <%}} %>
              </ul>
            </div>
          </div>
          <div class="slot-details" id="slot-details6" style="display: none;">
            <div class="morning_slots">
              <h3>Morning Slot</h3>
              <ul>
                <%for(i in slotData){ %> <% if(slotData[i].slotDate === days[6]
                && slotData[i].slot === "morningSlot") {%>
                <p></p>

                <li>
                  <a href="/appointmentDetails/<%=slotData[i].id%>">
                    <%= slotData[i].subSlotTime%></a
                  >
                </li>
                <p></p>
                <%}} %>
              </ul>
            </div>
            <hr />
            <div class="afternoon_slots">
              <h3>Afternoon Slot</h3>
              <ul>
                <%for(i in slotData){ %> <% if(slotData[i].slotDate === days[6]
                && slotData[i].slot === "afternoonSlot") {%>
                <p></p>

                <p></p>
                <li>
                  <a href="/appointmentDetails/<%=slotData[i].subId%>"
                    ><%= slotData[i].subSlotTime%></a
                  >
                </li>
                <p></p>
                <%}} %>
              </ul>
            </div>
            <hr />
            <div class="evening_Slots">
              <h3>Evening Slots</h3>
              <ul>
                <%for(i in slotData){ %> <% if(slotData[i].slotDate === days[6]
                && slotData[i].slot === "eveningSlot") {%>
                <p></p>
                <li>
                  <a href="/appointmentDetails/<%=slotData[i].subId%>"
                    ><%= slotData[i].subSlotTime%></a
                  >
                </li>
                <p></p>
                <%}} %>
              </ul>
            </div>
          </div>
          <div class="slot-details" id="slot-details7" style="display: none;">
            <div class="morning_slots">
              <h3>Morning Slot</h3>
              <ul>
                <%for(i in slotData){ %> <% if(slotData[i].slotDate === days[7]
                && slotData[i].slot === "morningSlot") {%>
                <p></p>

                <li>
                  <a href="/appointmentDetails/<%=slotData[i].id%>">
                    <%= slotData[i].subSlotTime%></a
                  >
                </li>
                <p></p>
                <%}} %>
              </ul>
            </div>
            <hr />
            <div class="afternoon_slots">
              <h3>Afternoon Slot</h3>
              <ul>
                <%for(i in slotData){ %> <% if(slotData[i].slotDate === days[7]
                && slotData[i].slot === "afternoonSlot") {%>
                <p></p>

                <p></p>
                <li>
                  <a href="/appointmentDetails/<%=slotData[i].subId%>"
                    ><%= slotData[i].subSlotTime%></a
                  >
                </li>
                <p></p>
                <%}} %>
              </ul>
            </div>
            <hr />
            <div class="evening_Slots">
              <h3>Evening Slots</h3>
              <ul>
                <%for(i in slotData){ %> <% if(slotData[i].slotDate === days[7]
                && slotData[i].slot === "eveningSlot") {%>
                <p></p>
                <li>
                  <a href="/appointmentDetails/<%=slotData[i].subId%>"
                    ><%= slotData[i].subSlotTime%></a
                  >
                </li>
                <p></p>
                <%}} %>
              </ul>
            </div>
          </div>
          <div class="slot-details" id="slot-details8" style="display: none;">
            <div class="morning_slots">
              <h3>Morning Slot</h3>
              <ul>
                <%for(i in slotData){ %> <% if(slotData[i].slotDate === days[8]
                && slotData[i].slot === "morningSlot") {%>
                <p></p>

                <li>
                  <a href="/appointmentDetails/<%=slotData[i].id%>">
                    <%= slotData[i].subSlotTime%></a
                  >
                </li>
                <p></p>
                <%}} %>
              </ul>
            </div>
            <hr />
            <div class="afternoon_slots">
              <h3>Afternoon Slot</h3>
              <ul>
                <%for(i in slotData){ %> <% if(slotData[i].slotDate === days[8]
                && slotData[i].slot === "afternoonSlot") {%>
                <p></p>

                <p></p>
                <li>
                  <a href="/appointmentDetails/<%=slotData[i].subId%>"
                    ><%= slotData[i].subSlotTime%></a
                  >
                </li>
                <p></p>
                <%}} %>
              </ul>
            </div>
            <hr />
            <div class="evening_Slots">
              <h3>Evening Slots</h3>
              <ul>
                <%for(i in slotData){ %> <% if(slotData[i].slotDate === days[8]
                && slotData[i].slot === "eveningSlot") {%>
                <p></p>
                <li>
                  <a href="/appointmentDetails/<%=slotData[i].subId%>"
                    ><%= slotData[i].subSlotTime%></a
                  >
                </li>
                <p></p>
                <%}} %>
              </ul>
            </div>
          </div>
        </div>
        <!-- <h3>Available slots</h3>

      
       <% let count = 0 %><% for(i in slots) {%>
        <p></p>
        <% if(moment(slots[i].date).format("dddd,Do MMMM YYYY") === days[0]) {%>
        <% slots[i].startTime%><% count++} %> <% } %>

        <div class="slot_main_div">
          <div class="slot_child_divs" onclick="displaySlot()">
            <%=days[0]%>

            <p><%= count%> Slots available</p>
          </div>
          <div class="slot_child_divs" onclick="displaySlot1()">
            <%=days[1]%>
          </div>
          <div class="slot_child_divs" onclick="displaySlot2()">
            <%=days[2]%>
          </div>
          <div class="slot_child_divs" onclick="displaySlot3()">
            <%=days[3]%>
          </div>
          <div class="slot_child_divs" onclick="displaySlot4()">
            <%=days[4]%>
          </div>
          <div class="slot_child_divs" onclick="displaySlot5()">
            <%=days[5]%>
          </div>
          <div class="slot_child_divs" onclick="displaySlot6()">
            <%=days[6]%>
          </div>
        </div>

        <div class="slot-details" id="slot-details" style="display: none;">
          <ul>
            <% for(i in slots) {%>
            <p></p>
            <% if(moment(slots[i].date).format("dddd,Do MMMM YYYY") === days[0])
            {%>
            <li><%= slots[i].startTime%></li>
            <% count++} %> <% } %>
          </ul>
        </div>

        <div class="slot-details" id="slot-details1" style="display: none;">
          <ul>
            <li>
              <% let count1 = 0 %> <% for(i in slots) {%>
              <p></p>
              <% if(moment(slots[i].date).format("dddd,Do MMMM YYYY") ===
              days[1]) {%> <%= slots[i].startTime %> <% count1++} %> <% } %>
              <p><%= count1%> slots availabl</p>
            </li>
          </ul>
        </div>
        <div class="slot-details" id="slot-details2" style="display: none;">
          <% let count2 = 0 %> <% for(i in slots) {%>
          <p></p>
          <% if(moment(slots[i].date).format("dddd,Do MMMM YYYY") === days[2])
          {%> <%= slots[i].startTime %> <% count2++} %> <% } %>
          <p></p>
          <% if(count2===0){ %>
          <p>No slots available</p>
          <%}else{%> <%= count2 %><%}%>
        </div>
        <div class="slot-details" id="slot-details3" style="display: none;">
          <% let count3 = 0 %> <% for(i in slots) {%>
          <p></p>
          <% if(moment(slots[i].date).format("dddd,Do MMMM YYYY") === days[3])
          {%> <%= slots[i].startTime %><% count2++} %> <% } %>
          <p></p>
          <% if(count3===0){ %>
          <p>No slots available</p>
          <%}else{%> <%= count3 %> <%}%>
        </div>
        <div class="slot-details" id="slot-details4" style="display: none;">
          <% for(i in slots) {%>
          <p></p>
          <% if(moment(slots[i].date).format("dddd,Do MMMM YYYY") === days[4])
          {%> <%= slots[i].startTime %> <%}} %>
        </div>
        <div class="slot-details" id="slot-details5" style="display: none;">
          <% for(i in slots) {%>
          <p></p>
          <% if(moment(slots[i].date).format("dddd,Do MMMM YYYY") === days[5])
          {%> <%= slots[i].startTime %> <%}} %>
        </div>
        <div class="slot-details" id="slot-details6" style="display: none;">
          <% for(i in slots) {%>
          <p></p>
          <% if(moment(slots[i].date).format("dddd,Do MMMM YYYY") === days[6])
          {%> <%= slots[i].startTime %> <%}} %>
        </div> -->
      </div>
    </section>

    <script
      src="https://code.jquery.com/jquery-3.5.1.min.js"
      integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
      crossorigin="anonymous"
    ></script>
  </body>
</html>
